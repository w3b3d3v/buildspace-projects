
Flow 是一个全新的区块链网络，为主流而建。 为什么要做一个新的生态系统？ 因为现有的还没有为整个地球准备好。

想一想你最喜欢的 web3 应用。 它可以是建立在区块链上的任何东西——像 OpenSea 或 MagicEden 这样的 NFT 交易网站，或者像 UniSwap 这样的交易网站。 哎呀，它甚至可以只是您制作的简单留言簿！ 现在想象你的妈妈或你的祖母试图使用它。 他们必须下载一个钱包，设置一个“秘密短语”，然后*购买*加密货币才能试用！

Flow 改变了游戏。 Flow 上的所有内容都是为规模而生。 您的祖母只需使用她的电子邮件地址，即可在 10 秒内开始使用*任何* Flow 应用程序。 无需钱包设置。 即使在主网上，交易费用也有补贴（初学者免费）。
![](https://hackmd.io/_uploads/Hk0T5g7qc.png)



在这个项目中，我们将花费大量时间深入研究 Flow，您将有足够的时间通过**实际构建**来了解 Flow 到底是什么。

别担心——我们会讲到很多东西，比如 Flow 的 gas 费用低，它的速度有多快等等。

我**不**希望我们在这里花费大量时间在理论上。

我希望你做的最后一件事就是钻进区块链的兔子洞，开始观看大量随机的 YT 视频或维基百科帖子。 我认为这样做很好，*但先完成这个项目*。 那就去兔子洞吧！

我保证，一旦你真正交付这个项目，你所有的研究都会变得更加有意义。

不过，我确实认为对一些概念有一个基本的理解并从一个高层次的角度了解 Flow 上的东西是如何工作的是很有价值的！ 所以，让我们这样做吧:)。

### 👩‍💻 智能合约
Flow 智能合约与其他区块链非常相似。 以下是您**需要**了解的部分的概述。
![](https://hackmd.io/_uploads/SyT0Ow3uc.png)
[Image source](https://docs.onflow.org/dapp-development/flow-dapp-anatomy/)



您的大多数用户都是从客户端开始的——这可以是普通网站或移动应用程序。 他们将钱包连接到您的客户端并与区块链交互。 您的账户存在于区块链上，并与智能合约进行通信以执行诸如购买代币或 NFT 之类的操作。

这里唯一的“新”是 [Flow Client Library](https://www.npmjs.com/package/@onflow/fcl)。 这只是一个使与钱包和智能合约通信变得更加容易的包。 它有点像 Ethers.js 或 Web3js，只是它更易于使用！ FCL 让您不必担心用户使用哪个钱包 - 您只需编写一次钱包通信代码，它将适用于*每个* Flow 钱包！

如果您不熟悉智能合约，请将它们想象成只接受支票的自动售货机。 这张图片中没有区块链，所以请想象一下 哈哈

![](https://hackmd.io/_uploads/r1id5d4tc.png)



服务员（react 应用程序）问你想要什么，然后给你一张支票（交易），你用笔签名（钱包应用程序，如 Blocto、Lilico 或 Metamask），然后将其提交给自动售货机（智能合约）。 自动售货机**在**区块链上，如果交易遵循区块链规则，它就会按照你的交易告诉它的去做。 在我们的示例中，交易可能是从您那里拿走一些代币并给您一杯健怡可乐！

### 🏦 账户
Flow 还使用一种称为“帐户”的新型数据结构来存储内容。 您可以将 Flow 帐户想象成电子邮件帐户或 Dropbox/Google Drive/百度云帐户。 他们拥有访问凭据（登录名/密码）并在其中存储文件和文本等内容。

以下是 Flow 帐户的结构：
![](https://hackmd.io/_uploads/rklMwaau5.png)
[Image source](https://youtu.be/pRz7EzrWchs?t=37)



流量账户主要有两个部分：
1. 合约存储区：这是你的智能合约代码所在的地方。 您可以存储任意数量的智能合约。 这意味着您还可以[升级智能合约](https://docs.onflow.org/cadence/language/contract-updatability/) 轻松！ 该区域还包含可用于与之交互的**接口**。
2.账户文件系统：流量账户有自己的文件系统！ 你可以把它想象成桌面上的文件夹，里面有文件。 三个有效路径是：
- `/storage/`：只有账户所有者可以访问
- `/private/`: 就像私有 API，所有者和允许的账户可以访问
- `/public/`: 就像一个公共 API，网络中的任何人都可以访问它

如果我们回想自动售货机的例子，文件系统有点像自动售货机**内部**的存储空间。
![](https://hackmd.io/_uploads/S1LDNuEtq.png)
<sup>Icon from Flaticon</sup>



遗憾的是，我们不能在这些存储域中存储健怡可乐，只能存储数据对象。 什么是数据对象？ 合同中的任何数据结构，无论是资源还是简单的字符串。 “你好世界”变量？ 把它塞进去。 跟踪代币余额的“金库”？ 进去吧！ NFT 与所有者的映射？ 对。


### 💚 韵律
Flow 带有一种很棒的新编程语言，称为 Cadence。 语法的灵感来自于其他很棒的语言，例如 Swift 和 Rust，并注重清晰度。

但为什么？ 为什么他们必须创造一种新语言？ Solidity/Rust 还不够吗？

不，区块链编程是一个全新的领域。 当软件进入新的空间时，您需要新的范式。 现有的编程语言是为我们所知的计算机编程而设计的——私有的和无状态的。 区块链本质上是不同的（分布式的、有状态的和公共的），所以相同的语言原语不再适用。 这就像试图用一个有 1000 年历史的石炉来煮 60 秒的微波炉拉面/面条！

当计算机成为商品硬件时，我们需要**可移植**代码。 C诞生了。 从超级计算机 CPU 到微控制器，它可以在所有硬件上运行！

当图形用户界面在 90 年代成为流行时，我们看到 Java 及其面向对象编程非常适合。

随着执行客户端脚本的 Web 应用程序的兴起，我们使用了 JavaScript。

而现在，由于区块链的稀缺性和访问要求，我们有了 Cadence。

### 🔒 面向资源的程序设计
Solidity 和 WASM (Rust) 的问题在于“稀缺资源”只是数据结构。 如果智能合约不添加保护和检查，任何人都可以通过更新映射等数据结构来更改资产的所有权。 你拥有 NFT，但这只是因为合同上是这么说的。 **如果合约构建不正确，有人可能会在未经许可的情况下更改所有者。**

Cadence 通过面向资源的编程解决了这个问题。 这不是一个随机的决定，很多 [研究](https://www.onflow.org/technical-paper) 都是为了达到这里。 我不想在这里深入理论，**你需要知道的是**：

区块链上的对象有两个主要要求：
1. 它们的稀缺性必须可控
2. 必须控制和执行他们的访问

为了满足这些要求，Cadence 使用“资源”。 当我们把某样东西变成资源时，它必须遵循以下规则：

1. **每个资源在任何给定时间都恰好存在于一个地方**。 资源不会因编程错误或恶意代码而被复制或意外删除。
2. **资源的所有权由其存储位置定义**。 不需要查询中央分类账来确定所有权。
3. **对资源方法的访问仅限于所有者**。 例如，只有 CryptoKitty 的所有者才能发起繁殖操作，从而导致新的 Kitty 诞生。
[来源](https://www.onflow.org/post/resources-programming-ownership)

这些规则在编译时*和*在运行时都被强制执行。 因此，如果你编写了错误的 Cadence 代码，它不检查你是否被允许转移 NFT，转移 ** 将不会发生！ ** 区块链基本上会说“嘿，你正在尝试做一些你没有做的事情 允许，离开这里”并取消您的交易。

资源的独特之处在于，由于Cadence强大的静态类型系统，它们一次只能存在于一个位置，不会因为编码错误而被复制或丢失。 资源通过将资源保存在帐户的存储中，直接将资产的所有权与拥有它的帐户联系起来，而不是使用分类账式的方法来记录所有权。

更酷的是，由于资源只是数据类型，它们可以拥有另一个资源。 所以如果你是
制作一个链上版本的口袋妖怪，你的皮卡丘可以**拥有**物品，如进化石或能量提升！

如果您很难理解这一点，请不要担心，一旦我们开始编写代码，您就会明白！ 现在，你可以把 Cadence 想象成一个不允许你偷东西的世界，因为物理定律阻止你偷东西，哈哈

读够了，让我们按下我们键盘上的一些按钮吧！